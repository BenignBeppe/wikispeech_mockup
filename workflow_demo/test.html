<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Wikispeech workflow demo</title>
  <meta name="description" content="Edit, synthesise, listen loop">

  <!-- jquery css for columns -->
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">

  <!-- responsivetabs -->
  <link rel="stylesheet" href="ext/responsivetabs/css/font-awesome.css">
  <link rel="stylesheet" href="ext/responsivetabs/css/style.css">

  <!-- Trumbowyg editor -->
<!--  <link rel="stylesheet" href="ext/Trumbowyg-master/css/main.css">-->
  <link rel="stylesheet" href="ext/Trumbowyg-master/dist/ui/trumbowyg.css">

<script type="text/javascript" src="ext/sorttable.js"></script>
<style>
tr.selected{
    background: white;
}
</style>


<script type="text/javascript" src="../wikispeech_simple_player.js"></script>
<script type="text/javascript">
window.onload = function() {
 ws_host = "http://localhost:10000/wikispeech";
};
</script>


</head>


<body>
  <h1></h1>
  <main>

    <div id="tabs" class="c-tabs no-js">
      <div class="c-tabs-nav">
	<a href="#" class="c-tabs-nav__link is-active"><span>Input</span></a>
	<a href="#" class="c-tabs-nav__link"><span>Synthesis</span></a>
	<a href="#" class="c-tabs-nav__link"><span>Lexicon</span></a> 
	<a href="#" class="c-tabs-nav__link"><span>Lexicon Entry Editor</span></a>    
      </div>
  
      <div class="c-tab is-active">
	<div class="c-tab__content">
	  <h2>Input</h2>
	  <p>Edit html here, then synthesise or lookup words.</p>
	  <input type="button" onclick="myTabs.goToTab(2);tokeniseHtmlText();" value="Tokenise"></input>
	  
	  <div id="html_editor">

	    <!-- some sample text to start with, remove after testing! -->
	    <p><br>
	      <ssml:s>
	      Fartyget byggdes <br>
	      <ssml:sub alias="nittonhundra-femtionio">1959</ssml:sub> 
	      i 
	      <phoneme alphabet="x-sampa" ph='" p O . rt u0 . g a l'>Portugal</phoneme> 
	      på 
	      <phoneme alphabet="x-sampa" ph="E s . t a . &quot; l E j . r O s">Estaleiros</phoneme> 
	      <phoneme alphabet="x-sampa" ph="n a . &quot; v a j s">Navais</phoneme> 
	      <phoneme alphabet="x-sampa" ph="&quot; d E">de</phoneme> 
	      <phoneme alphabet="x-sampa" ph="v I . &quot; a . n a">Viana</phoneme> 
	      <phoneme alphabet="x-sampa" ph="&quot; d O">do</phoneme> 
	      <phoneme alphabet="x-sampa" ph="k a s . &quot; t E . l O">Castelo</phoneme>
	      , och levererades till Färöarna under namnet 
	      <phoneme alphabet="x-sampa" ph="&quot; v A: k . b I N . k u0 r">Vágbingur</phoneme>
	      .
	      </ssml:s>
	      <ssml:s>
	      Under 20 års tid tjänstgjorde det som fiskefartyg på 
	      <ssml:sub alias="nord-atlanten">nordatlanten</ssml:sub> 
	      innan fartyget 
	      <ssml:sub alias="nittonhundra-åttioett">1981</ssml:sub> 
	      såldes till Göteborg, då i namnet 
	      <phoneme alphabet="x-sampa" ph="&quot;&quot; b j A: rn . % 9 j">Bjarnoy</phoneme> 
	      <ssml:sub alias="två">II</ssml:sub>
	      .
	      </ssml:s>
	    </p>
	    <!-- end of sample text -->

          </div>


	</div>	
      </div>
      
      <div class="c-tab">
	<div class="c-tab__content">
	  <h2>Synthesis</h2>

	  <div id="synthesis_container">

	    <!-- Initial content for testing -->
	    <div>
	      <span contenteditable>Fartyget byggdes 1959 i Portugal på Estaleiros Navais de Viana do Castelo , och levererades till Färöarna under namnet Vágbingur.</span>
	      <audio controls></audio>
	      <input type="button" value="Synthesise"></input>
	    </div>
	    
	    <div>
	      <span>Under 20 års tid tjänstgjorde det som fiskefartyg på nordatlanten innan fartyget 1981 såldes till Göteborg, då i namnet Bjarnoy II .</span>
	      <audio controls></audio>
	      <input type="button" value="Synthesise">
	    </div>
	    <!-- END Initial content for testing -->

	  </div>
	</div>
      </div>
      

      <div class="c-tab">
	<div class="c-tab__content">
	  <h2>Lexicon</h2>

	  <div data-role="main" class="ui-content">
	    <div class="ui-grid-a">
	      <div class="ui-block-a">
		<h3>Words sortable table</h3>

		<table id="words_table" class="sortable">
		  <thead>
		    <tr>
		      <th>Word</th>
		      <th>Freq</th>
		      <th style="width: 30em;">Transcription</th> 
		      <th>In lex</th>
		      <th>In ssml</th>
		      <th>Multiple</th>
		      <th>Listen</th>
		    </tr>
		  </thead>
		  <tbody>
		    <tr class="selected">
		      <td>fartyget</td>
		      <td>1</td>
		      <td>f a rt y g e t</td>
		      <td><input type="checkbox" value="in_lex" checked></td>
		      <td><input type="checkbox" value="in_ssml"></td>
		      <td><input type="checkbox" value="multiple"></td>
		      <td><input type="button" value="Listen"></td>
		    </tr>
		    <tr>
		      <td>byggdes</td>
		      <td>2</td>
		      <td>b y g d e s</td>
		      <td><input type="checkbox" value="in_lex"></td>
		      <td><input type="checkbox" value="in_ssml"></td>
		      <td><input type="checkbox" value="multiple" checked></td>
		      <td><input type="button" value="Listen"></td>
		    </tr>
		    <tr>
		      <td>1959</td>
		      <td>1</td>
		      <td>z t r a n s</td>
		      <td><input type="checkbox" value="in_lex" checked></td>
		      <td><input type="checkbox" value="in_ssml" checked></td>
		      <td><input type="checkbox" value="multiple"></td>
		      <td><input type="button" value="Listen"></td>
		    </tr>
		  </tbody>
		</table>
	      </div>
	      
	      <div class="ui-block-b">
		<h3>Detail of selected word</h3>
		<div id="selected_word_detail">
		  <!-- Initial content for testing -->	    
		  <div>
		    <span id="selected_word" style="display: inline-block; width: 30em;">1959</span>
		    <input type="button" value="Edit" onclick="myTabs.goToTab(3);searchLexicon($('#selected_word')[0].innerHTML);">
		    <div>
		      <table>
			<thead>
			  <tr>
			    <th>Nr</th>
			    <th style="width: 30em;">Transcription</th>
			    <th>Listen</th>
			    <th>Language</th>
			    <th>Pos</th>
			    <th>Preferred</th>
			  </tr>
			</thead>
			<tbody id="selected_table">
			  <tr>
			    <td>1</td>
			    <td><span id="selected_trans">t e s t</span></td>
			    <td><input type="button" value="Listen"></td>
			    <td>sv-SE</td>
			    <td>NN</td>
			    <td><input type="checkbox" value="preferred" checked></td>
			  </tr>
			  <tr>
			    <td>2</td>
			    <td><span id="selected_trans">t A s t</span></td>
			    <td><input type="button" value="Listen"></td>
			    <td>sv-SE</td>
			    <td>NN</td>
			    <td><input type="checkbox" value="preferred" ></td>
			  </tr>
			</tbody>
		      </table>
		    </div>
		    <!-- END Initial content for testing -->
		    
		  </div>
		</div>
	      </div>
	      
	      <div id="lexicon_container">
		
		
		
	      </div>
	    </div>
	  </div>
	</div>
      </div>


      <div class="c-tab">
	<div class="c-tab__content">
	  <h2>Lexicon entry editor</h2>
	  <p>
	    The lexicon entry editor displays editable and uneditable information for the lexicon entry. Uses json schema. Validation of fields. 
	  </p>
	  <div>
	    <input type="text" id="search_term">
	    <input type="button" value="search" onclick="searchLexicon($('#search_term').val());">
	  </div>
	  <hr/>
    
	  <div id="entry_editor_holder"></div>


	</div>
      </div>


    </div>
    
  </main>
  <hr>
  <address></address>
  <!-- hhmts start -->Last modified: Wed Sep 21 12:44:51 CEST 2016 <!-- hhmts end -->

  <script src="ext/responsivetabs/js/tabs.js"></script>
  <script>
    var myTabs = tabs({
    el: '#tabs',
    tabNavigationLinks: '.c-tabs-nav__link',
    tabContentContainers: '.c-tab'
    });
    
    myTabs.init();
    //myTabs.goToTab(3);
  </script>

  <script src="ext/jquery/jquery-3.1.0.min.js"></script>-->
  <script src="ext/Trumbowyg-master/dist/trumbowyg.js"></script>
  <script>
    /** Default editor configuration **/
    $('#html_editor').trumbowyg();
  </script>

  <script src="ext/json-editor/jsoneditor.js"></script>
  <script src="ext/json-editor/initialise.js"></script>

  <script src="test_workflow.js"></script>


</body>
</html>
